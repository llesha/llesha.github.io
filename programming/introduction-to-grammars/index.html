<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="Grammar defines a set of strings (words), which is called a language. Essentially grammar is a Dictionary <String, String>, where each dictionary entry is a grammar rule."><title>Introduction to grammars</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/svg href=https://llesha.github.io//avatar.svg><link href=https://llesha.github.io/styles.eeff98fe91a97450818181a0be859aa0.min.css rel=stylesheet><link href=https://llesha.github.io/styles/_light_syntax.e923b5986cd928fbf9d7a05f9c569013.min.css rel=stylesheet id=theme-link><script src=https://llesha.github.io/js/darkmode.7b214e6ee7c799364855d98f52fd8d27.min.js></script>
<script src=https://llesha.github.io/js/util.9825137f5e7825e8553c68ce39ac9e44.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script>
<script src=https://unpkg.com/@floating-ui/core@0.7.3></script>
<script src=https://unpkg.com/@floating-ui/dom@0.5.4></script>
<script src=https://llesha.github.io/js/popover.53ad9a087e3feeaaa12b63bfd02d923b.min.js></script>
<script src=https://llesha.github.io/js/code-title.b35124ad8db0ba37162b886afb711cbc.min.js></script>
<script src=https://llesha.github.io/js/clipboard.c20857734e53a3fb733b7443879efa61.min.js></script>
<script src=https://llesha.github.io/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const BASE_URL="https://llesha.github.io/",fetchData=Promise.all([fetch("https://llesha.github.io/indices/linkIndex.c1813c7fe7541238b1b247d89de65a9e.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://llesha.github.io/indices/contentIndex.f84b22aab4a5562ab94bf22ecc1f27e1.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,s=t==n;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts(),initPopover("https://llesha.github.io",!0,!0);const o=document.getElementById("footer");if(o){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=s&&!1;drawGraph("https://llesha.github.io",t,[{"/moc":"#4388cc"}],t?{centerForce:10,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:10,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:10,depth:2,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:10,opacityScale:3,repelForce:1,scale:1.4})}},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{'â€™':"'"},throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/llesha.github.io\/js\/router.9d4974281069e9ebb189f642ae1e3ca2.min.js"
    attachSPARouting(init, render)
  </script></head><script async src="https://www.googletagmanager.com/gtag/js?id=G-XYFD95KB4J"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XYFD95KB4J",{anonymize_ip:!1})}</script><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://llesha.github.io/js/full-text-search.24827f874defbbc6d529926cbfcfb493.min.js></script><div class=singlePage><header><h1 id=page-title><a href=https://llesha.github.io/>WaterStop</a></h1><div class=spacer></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><h1>Introduction to grammars</h1><p class=meta>Last updated
Sep 30, 2022</p><ul class=tags></ul><p>Grammar defines a set of strings (words), which is called a <strong>language</strong>.
Essentially grammar is a <code>Dictionary &lt;String, String></code>, where each dictionary entry is a
<strong>grammar rule</strong>.</p><p>Other two important definitions are terminal and non-terminal symbols.
Terminal is a string that cannot be resolved into something else,
unlike non-terminal. Consequently, a result of grammar resolve should always be a sequence
of terminals.</p><p>For terminals a lowercase letter is assigned, for non-terminal a capital one. Also, there is a
special starting non-terminal marked <code>S</code>
(we assume that we start creating words starting with <code>S</code>).</p><a href=#creating-a-grammatically-correct-word><h3 id=creating-a-grammatically-correct-word><span class=hanchor arialabel=Anchor># </span>Creating a grammatically correct word</h3></a><p>Starting with <code>S</code>, on each step we choose a non-terminal symbol and a rule with the same symbol on
the left-hand side. Then such non-terminal is replaced with the right-hand side of the rule. Until
there is a non-terminal, a process is continued.</p><p>Consider a following example of a grammar:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>grammar gA
</span></span><span class=line><span class=cl>S -&gt; a
</span></span><span class=line><span class=cl>S -&gt; aS
</span></span></code></pre></td></tr></table></div></div><p>To create a word <code>aaa</code>:</p><ol><li>Have <code>S</code>, use <code>S -> aS</code>, now have <code>aS</code></li><li>Use <code>S -> aS</code>, result is <code>aaS</code></li><li>Use <code>S -> a</code>, end with <code>aaa</code>. All non-terminals are removed.</li></ol><p>Generally this grammar describes a language of words, containing any number of <code>a</code>s:
$L(gA) = \{a^n|n>0\}$</p><a href=#the-chomsky-hierarchy><h3 id=the-chomsky-hierarchy><span class=hanchor arialabel=Anchor># </span>The Chomsky hierarchy</h3></a><p>Grammar with a smaller type number contains all grammars with a bigger type number.</p><a href=#context-free-grammar-type-2><h4 id=context-free-grammar-type-2><span class=hanchor arialabel=Anchor># </span>Context free grammar (type 2)</h4></a><p>Grammars with a single non-terminal symbol on the left of each rule are called context free
grammars (CFG). Because no context is required for replacing a non-terminal.</p><a href=#regular-grammar-type-3><h4 id=regular-grammar-type-3><span class=hanchor arialabel=Anchor># </span>Regular grammar (type 3)</h4></a><p>Subset of content free grammars is regular grammars.
It puts a restriction on the right-hand side of
its rules, three types of expressions are allowed:</p><ul><li>empty string</li><li>single terminal</li><li>terminal followed by non-terminal.</li></ul><p>Example of a regular grammar:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>grammar gR
</span></span><span class=line><span class=cl>S -&gt; aX
</span></span><span class=line><span class=cl>S -&gt; EOW // (end of word)
</span></span><span class=line><span class=cl>X -&gt; bS
</span></span></code></pre></td></tr></table></div></div><p>This grammar defines a language $L(gR) = \{(ab)^n|n\geqslant0\}$</p><p>Context free grammar is a pushdown automata, regular grammar is a finite state machine.<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="80.06498mm" height="98.217171mm" viewBox="0 0 80.06498 98.217171" id="svg8" inkscape:version="1.0.2-2 (e86c870879, 2021-01-15)" sodipodi:docname="finite_state_regular.svg"><defs id="defs2"/><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1" inkscape:pageopacity="0" inkscape:pageshadow="2" inkscape:zoom=".7" inkscape:cx="83.450242" inkscape:cy="381.0925" inkscape:document-units="mm" inkscape:current-layer="layer1" inkscape:document-rotation="0" showgrid="false" inkscape:window-width="1431" inkscape:window-height="1030" inkscape:window-x="96" inkscape:window-y="0" inkscape:window-maximized="0"/><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(-86.73751,-31.817825)"><path style="fill:var(--dark);stroke-width:.264583" d="m122.8455 129.76178c-.55992-.32546-1.48182-2.2066-1.49043-3.04121-.003-.30961-.18441-.71114-.40269-.8923-.21828-.18115-.39687-.55665-.39687-.83445.0-.27779.17859-.5736.39687-.65736.26739-.10261.39688-.52243.39688-1.28675.0-1.81964.98847-4.61282 1.98512-5.60948 1.63274-1.63273 3.79085-.80655 4.24719 1.62596.20117 1.07234.0394 1.65115-.81186 2.90562l-.64201.94605h.87195c1.87318.0 2.70029 2.57821 1.52916 4.76663-.91127 1.70283-4.23656 2.91824-5.68331 2.07729zm3.33713-2.22325c.8613-.58527.98746-.80499.98746-1.71979v-1.0488h-1.09378c-.60158.0-1.54403.1349-2.09433.29977-.96213.28826-.9949.3365-.85378 1.25677.0807.52635.25344 1.16536.38384 1.42002.3417.66733 1.51719.57578 2.67059-.20797zm-1.42749-6.06997c1.15047-1.24811 1.38828-2.20879.69019-2.78815-.59421-.49316-1.36635.31983-1.84975 1.94761-.71797 2.41767-.46393 2.60182 1.15956.84054zm33.23891-.77289c-1.38281-.43733-2.59862-1.07917-3.03094-1.60009-.21622-.26053-.45775-.32909-.64219-.18228-1.05602.84052-8.28586 1.09003-12.20187.42111-4.1931-.71626-11.13695-3.36401-17.4625-6.6586-2.81066-1.46389-10.47767-6.27587-12.60251-7.9096l-1.49002-1.14563-.14706.73532c-.22863 1.14315-1.03548 1.99332-1.69354 1.78446-.71509-.22697-.91823-.7828-.59591-1.63056.36106-.94966.31994-2.09619-.11227-3.13062l-.36943-.88418-1.84937.13232c-1.67084.11955-2.01861.0524-3.60243-.695954-1.52651-.721244-1.8319-.990542-2.363205-2.083914-.385414-.79315-.749718-1.217803-.989076-1.152917-.208413.05649-.961337.200811-1.673164.320707-.711827.119893-1.744025.529693-2.293768.910666-1.236074.8566-2.200533.796687-2.309491-.143467-.05624-.485241.11998-.782934.661458-1.117439l.738117-.45598-1.322916-.0086c-.727605-.0047-2.302699-.0849-3.500211-.178122-1.873479-.145847-2.201049-.24434-2.347529-.705858-.296124-.933003.530444-1.238142 3.353909-1.238142 2.339727.0 2.576498-.04625 2.702436-.527831.224886-.859967.912822-.90529 2.785454-.183512.972643.374891 2.214925.753232 2.760628.840761.969896.155567.992187.140454.992187-.672756.0-2.070073 1.486121-3.630409 4.167481-4.375594 1.5037-.417902 1.78272-.423807 3.0718-.06501l1.41787.394644 1.34743-1.607955c4.37932-5.226063 14.34113-14.42403 18.57042-17.146506 2.88432-1.856695 10.48217-6.510038 11.90625-7.292046.80036-.439507 2.67836-1.233921 4.17333-1.765364 3.26476-1.160581 6.18743-2.477092 5.55941-2.504228-.68341-.02953-1.05648-.901594-.63329-1.480344.31593-.432064.49624-.446283 1.97355-.155638.96313.189484 2.27094.246885 3.20841.140822l1.58255-.179044-.0278-1.23457c-.0593-2.63431 1.84948-4.681164 4.63347-4.968496 3.94829-.407501 6.92831 2.19788 6.40251 5.597594-.2652 1.714701-1.34763 3.640391-2.45877 4.374237-1.93145 1.275628-6.08879.66127-7.30844-1.080011l-.39254-.56043-1.27859.858946c-.70322.472419-1.78731 1.34578-2.40908 1.940801-.92801.888082-1.21235 1.030309-1.5875.794062-.7043-.443521-.67977-1.008988.0831-1.915583.38367-.455967.61766-.829032.51997-.829032-.0977.0-1.01055.36558-2.02858.812398-1.01804.446817-3.39716 1.397354-5.28693 2.112301-2.54815.964025-4.57666 1.997069-7.85067 3.998058-2.42809 1.483987-5.18861 3.170941-6.1345 3.748791-2.1777 1.330378-2.8835 1.856685-6.61458 4.932453-3.07664 2.536264-11.36501 10.645968-13.41899 13.129715l-1.11586 1.349343.64388.872723c.35413.479999.68292.989859.73064 1.133026.05.150076.44039.07744.92187-.171543 1.26906-.656257 7.13225-.593844 10.83597.115348 7.06129 1.352103 16.04756 4.013663 20.10303 5.954133 1.7917.857295 5.51212 3.928357 8.27508 6.830757l.91417.96031.4152-1.12693c.45619-1.23816 1.24567-1.59956 1.86474-.85362.28176.33949.2909.53827.043.93522-.3937.63041-.39928 1.67288-.0186 3.47481.50053 2.36931.5394 2.39948 2.15238 1.67064 2.65913-1.20157 5.00033-1.10951 7.13734.28063 1.49972.97559 2.14756 2.46857 1.9952 4.59803-.20497 2.86464-1.2647 4.44053-3.56484 5.30112-1.61728.60511-2.40988.63785-3.91524.16177zm3.729-1.98553c.83239-.37803 1.18463-.74548 1.52136-1.58704 1.64171-4.10305-1.17804-6.86142-5.53396-5.41348-1.95649.65035-2.23178.98734-2.21904 2.71643.0163 2.21974.8494 3.73408 2.37034 4.30889 1.54936.58555 2.53127.57924 3.8613-.0248zm-9.38974-1.12481c1.54478-.25511 1.8166-.375 1.64968-.7276-.10992-.23219-.21885-1.35068-.24208-2.48553-.0392-1.9155-.11257-2.16551-1.02392-3.48875-1.1521-1.6728-1.68092-2.05957-3.59194-2.62708-.78081-.23187-1.50741-.56359-1.61468-.73715-.34443-.5573.26692-1.27011 1.08932-1.27011.72211.0.59309-.17135-1.9424-2.57969-3.19899-3.03858-4.10515-3.56714-9.17666-5.352698-10.10283-3.556971-21.08059-5.507133-24.66102-4.380947l-1.45687.458242-.1558 1.315509c-.0857.723529-.34028 1.685292-.56575 2.137251-.38821.778195-.37824.856255.18813 1.472978.6904.751775 2.28078 1.515995 3.69749 1.776745 1.29521.23838 1.70259.7286 1.31409 1.58127-.41169.90357-1.50343 1.13667-2.09884.44812-.25443-.29423-.76025-.61031-1.12405-.70239-.60516-.15317-.58264-.0979.26458.64948 1.02692.9059 2.03205 1.59073 6.87917 4.68705 6.86568 4.38577 15.87179 8.37719 21.69583 9.61538 2.65255.56394 8.09588.669 10.87572.20992zM107.62148 98.296021c2.69712-1.375971 2.3098-5.634305-.64575-7.099671-1.19694-.593442-1.36945-.612201-2.76265-.300416-.9707.217234-1.74367.590225-2.22907 1.075635-.6733.67329-.74309.91758-.74309 2.600968v1.857883l1.25677 1.199044c1.16325 1.109816 1.36092 1.199502 2.65638 1.205177.90108.0039 1.77993-.187899 2.46741-.53862zm55.5406-38.485769c1.46801-.759137 2.32962-3.712004 1.46718-5.02825-1.04578-1.596062-3.68724-2.226033-5.46943-1.304425-.8068.417213-1.82446 1.799047-1.82625 2.479786-53e-5.206782.36565 1.128562.81376 2.048399.66074 1.356291.97333 1.718339 1.65365 1.915276 1.28536.372089 2.50506.331886 3.36109-.110786zm.16061 46.834918c-.21873-.21873-.88885-1.28745-1.48915-2.37494-.6003-1.08748-1.19005-2.03817-1.31054-2.11264-.1205-.0745-.68102.66683-1.2456 1.64733-.83082 1.44286-1.15119 1.78273-1.68048 1.78273-1.05162.0-.93496-.73489.52888-3.33164l1.35987-2.41233-.98583-1.890517c-.54221-1.039783-1.32431-2.388216-1.738-2.99652-1.07235-1.576798-.95181-2.743872.24239-2.346894.58859.195662 1.8355 1.958097 2.7431 3.877223.3892.822965.81128 1.560356.93795 1.638644.12668.07829 1.0097-.949164 1.96228-2.283227 1.8073-2.531076 2.67514-3.113376 3.02012-2.026423.19892.626724-.43445 1.71831-2.55351 4.400865-.70602.89376-1.28367 1.760387-1.28367 1.925839.0.16546.65485 1.50574 1.45521 2.9784 1.55147 2.85469 1.63205 3.10995 1.13771 3.60429-.41542.41542-.62002.40052-1.10073-.0802zM135.31553 94.937461c-2.05323-.282356-3.28755-4.273865-2.06357-6.673078.93337-1.829554 2.32594-2.316898 4.05158-1.417889.46572.242626 1.20274.515152 1.63783.605613 1.04842.21798 1.44919 1.082868 1.45398 3.137831.002.919073.12716 1.901339.2778 2.182813.38484.719077 1.61056.65341 2.79399-.149685 1.14965-.780177 1.25949-.794198 1.82122-.232469.67143.671426.38635 1.147104-1.18494 1.977158-1.80989.956095-3.13818 1.002723-4.13516.145155-.70766-.608695-.7446-.61264-1.53611-.164044-.91576.519012-2.05629.734409-3.11662.588595zm2.04952-2.03631c.90319-.377378.91754-.408332.91754-1.978999.0-1.592509-.002-1.596665-1.04779-2.130168-.57629-.293998-1.27155-.534543-1.54504-.534543-1.03965.0-1.49394 2.725994-.70767 4.246472.45562.881071 1.00557.972746 2.38296.397238zM100.06349 79.633876c-.758844-.758844.27583-1.695186 1.87321-1.695186 1.04725.0 3.16972-1.032489 3.53833-1.721236.20486-.382781.282-1.109181.19745-1.85928-.1558-1.382332-.95845-2.363304-3.78481-4.625684-.88121-.705377-1.82836-1.702441-2.104765-2.215698-.47366-.879536-.477584-.98557-.06826-1.843939.722935-1.515994 2.906825-2.815413 4.731785-2.815413 1.55818.0 3.33295 1.317686 2.98745 2.218042-.25051.652822-.91502.719984-1.62193.163922-.37051-.291433-1.02654-.529881-1.45787-.529881-1.04065.0-2.5299.727472-2.89826 1.415749-.26389.493088-.12669.697108 1.26592 1.882444 3.05305 2.598634 4.27163 3.940313 4.57411 5.036182.89979 3.259874-.25813 5.25361-3.67368 6.325434-1.95032.612026-3.12395.69927-3.55868.264544zm20.67578-14.674991c-.82251-.502912-.99453-1.436251-.66859-3.627686.24079-1.618994.44866-2.182469 1.01352-2.747328 1.34443-1.34443 4.53419-1.626584 4.91253-.434544.24609.775383-.23108 1.08724-1.74511 1.140511-.89985.03166-1.49606.203708-1.79428.517771-.42471.447267-.39905.463227.52279.325212 1.13473-.169889 1.91112.277638 1.7683 1.019276-.0539.279752-.33472.548812-.62409.597908-1.74779.29654-2.5105.625314-2.5105 1.082178.0.415792.21308.479213 1.52135.452821 1.37348-.02771 1.52935.02543 1.60356.546722.0506.355756-.10953.680021-.41726.844711-.8016.429006-3.05228.606467-3.58222.282448zm6.7816-1.171268c-.78634-.550773-1.08448-1.59484-1.00877-3.532667.0556-1.422659.17531-1.782699.81466-2.450041 1.39219-1.453134 3.29659-1.441633 4.3418.02622.99789 1.401411.54843 3.834834-1.01802 5.511729-.88103.943144-2.15887 1.124738-3.12967.444759zm2.29795-2.31924c.91923-1.507633.51174-3.391262-.63817-2.949998-.97852.375491-1.25564 2.042536-.52492 3.157744.23502.358682.47489.65215.53305.65215.0582.0.34168-.386953.63004-.859896zm4.1019 1.130557c-.39239-.634897-1.65648-4.900089-1.54125-5.200364.18525-.482759.89743-.673579 1.29194-.346165.19187.159231.55082.897612.79769 1.64085l.44884 1.351338.51128-1.086323c.77095-1.63807 1.91612-1.813195 2.58443-.395224l.34053.722519.48643-1.058334c.26754-.582083.48956-1.202973.49337-1.379754.004-.176781.2368-.444434.51773-.594786.38557-.206351.6126-.171567.92604.14188.53674.536736.55547.413435-.45569 3.001166-1.16211 2.974039-2.00534 3.427741-3.0353 1.633146l-.44732-.779409-.66749 1.237837c-.5017.930391-.842 1.258033-1.3701 1.319146-.38644.04472-.78295-.04866-.88113-.207523zm21.67719-18.976472c-.58494-.584942-.47955-.918985.82452-2.613188.66357-.862103 2.0199-2.643508 3.01405-3.958679s1.99904-2.55014 2.23308-2.744376c.87159-.723359.45782-.882808-1.80235-.694537-2.04113.170025-2.25097.142444-2.50329-.329031-.20026-.374193-.18156-.642967.0685-.985008.29246-.399959.77624-.47177 3.23089-.479575 4.59046-.01459 5.05293.621242 2.53643 3.487293-.84763.965362-2.19679 2.648172-2.99815 3.739578-.80135 1.091406-1.65565 2.147782-1.89845 2.347501-.24279.199719-.44144.44799-.44144.551712.0.103722 1.57758.17844 3.50573.16604 4.29029-.02759 5.02615.132654 4.91148 1.069547l-.0828.67676-5.10812.07397c-4.17166.06041-5.17814.0039-5.4901-.308012z" id="path847"/></g></svg></p><a href=#context-sensitive-grammar-type-1><h4 id=context-sensitive-grammar-type-1><span class=hanchor arialabel=Anchor># </span>Context-sensitive grammar (type 1)</h4></a><p>Context-sensitive grammars allow left-hand side to contain context, which must be similar in the
right-hand side. Formally speaking, each rule of context-sensitive grammar is:
$$c_0Ac_1 \rightarrow c_0bc_1$$ where:</p><ul><li>$c_0,\; c_1$ are sequences of terminals and non-terminals
(sequence might be empty),</li><li>$A$ is a non-terminal</li><li>$b$ is a non-empty sequence of terminals and non-terminals.</li></ul><a href=#unrestricted-grammar-type-0><h4 id=unrestricted-grammar-type-0><span class=hanchor arialabel=Anchor># </span>Unrestricted grammar (type 0)</h4></a><p>Unrestricted grammars are grammars without any restrictions to their rules.</p><a href=#bnf-ebnf><h3 id=bnf-ebnf><span class=hanchor arialabel=Anchor># </span>BNF, EBNF</h3></a><p>There is a special Backus-Naur form and Extended Backus-Naur form (BNF, EBNF) to
describe a context free grammar. This notation is used most commonly. Here is
a
<a href=https://docs.python.org/3/reference/grammar.html rel=noopener>python grammar defined with EBNF and PEG</a>.</p><a href=#non-formal-grammars><h1 id=non-formal-grammars><span class=hanchor arialabel=Anchor># </span>Non formal grammars</h1></a><p>Before going any further, let&rsquo;s bring in some clarifications.</p><a href=#grammar-notation><h3 id=grammar-notation><span class=hanchor arialabel=Anchor># </span>Grammar notation</h3></a><p>Previously we used capitals for non-terminals and lowercase for terminals. But in real grammars
identifiers are used. We consider every identifier that appears on the left hand-side a
non-terminal (we work with grammars having only a non-terminal on the left-hand side),
other identifiers are terminals.</p><p>Introduce new symbols:</p><ul><li><code>|</code> - choice operator (or). Grammar rule that contains <code>|</code> is actually multiple grammar rules:
<code>S -> a | b | ... | n</code> is</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>S -&gt; a
</span></span><span class=line><span class=cl>S -&gt; b
</span></span><span class=line><span class=cl>...
</span></span><span class=line><span class=cl>S -&gt; n
</span></span></code></pre></td></tr></table></div></div><p>If the rule is more complicated, containing nested choice operators, it is rewritten in a similar
manner:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>S -&gt; (a | b) &#39;+&#39; d | c
</span></span><span class=line><span class=cl>// rewritten to
</span></span><span class=line><span class=cl>S -&gt; a &#39;+&#39; d 
</span></span><span class=line><span class=cl>S -&gt; b &#39;+&#39; d
</span></span><span class=line><span class=cl>S -&gt; c
</span></span></code></pre></td></tr></table></div></div><ul><li><code>:</code> in EBNF colon replaces arrow to divide two sides of a rule. I&rsquo;ll stick to the arrow for
the time, to keep the style consistent and justify the use of code blocks
(I use FiraCode with ligatures in code blocks to make arrow a continuous symbol)</li></ul><p>All grammars discussed before are formal grammars. Formal grammars have terminals and non-terminals
in their rules and no other operators of special symbols.</p><a href=#parsing-expression-grammars-or-pegs><h3 id=parsing-expression-grammars-or-pegs><span class=hanchor arialabel=Anchor># </span>Parsing expression grammars or PEGs</h3></a><p>PEGs are very similar to CFGs, but they are not <strong>ambiguous</strong>,
meaning that for any input only one AST can be generated. It is achieved by selecting the first
match in a choice operator. For CFG<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> each variant in a choice operator is equal in terms of
precedence (and because of that two ASTs may be generated from one input).</p><a href=#recursive-grammars><h3 id=recursive-grammars><span class=hanchor arialabel=Anchor># </span>Recursive grammars</h3></a><p>if there is a rule with a non-terminal on the left side, which can be derived again by applying
some rules to the resulting expression.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>grammar rG
</span></span><span class=line><span class=cl>A -&gt; aBC
</span></span><span class=line><span class=cl>B -&gt; Db
</span></span><span class=line><span class=cl>C -&gt; c
</span></span><span class=line><span class=cl>D -&gt; Ad
</span></span></code></pre></td></tr></table></div></div><p>rG is recursive, because:</p><ol><li>starting with <code>A -> aBC</code></li><li>apply <code>B -> Db</code> to <code>aBC</code>, get <code>aDbC</code></li><li>apply <code>D -> Ad</code> to <code>aDbC</code> get <code>aAddC</code>. Non-terminal <code>A</code> is derived again.
Proved, that rG is recursive.</li></ol><p>Almost all non-trivial grammars are recursive.</p><a href=#left-recursion><h4 id=left-recursion><span class=hanchor arialabel=Anchor># </span>Left recursion</h4></a><p>Left recursive grammar is a grammar that contains a recursive rule, deriving form which will
eventually create the same non-terminal as the first symbol.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>grammar lrG
</span></span><span class=line><span class=cl>A -&gt; BC
</span></span><span class=line><span class=cl>B -&gt; Db
</span></span><span class=line><span class=cl>C -&gt; c
</span></span><span class=line><span class=cl>D -&gt; Ad
</span></span></code></pre></td></tr></table></div></div><p>lrG is left recursive, because same sequence of rules as in rG will produce AddC. A is the first
symbol, therefore lrG is left recursive.</p><p>Some parsers are unable to parse left recursive grammars, descending into infinite recursion.
For that reason, a grammar is rewritten, making it less humanly readable.
Any sensible left-recursive grammar can be rewritten, I think.
This grammar is not reasonable: <code>A -> A</code>.</p><section class=footnotes role=doc-endnotes><hr><ol><li id=fn:1 role=doc-endnote><p>When introducing CFG, I stated that it is a part of a Chomsky hierarchy, hence it is a formal
grammar. Consequently, only terminals and non-terminals are allowed in the rules.
But CFG can be mentioned outside the formal grammar set, keeping its distinctive characteristic of
one
non-terminal on the left-hand side. Therefore, CFG right-hand side can contain other special
symbols. From now on, if not explicitly specified, I&rsquo;ll use CFG term implying that <strong>it is not a
formal grammar</strong>.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></section></article><hr><div class=page-end id=footer><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li><a href=/programming/ast/ data-ctx=grammar data-src=/programming/ast class=internal-link>Abstract Syntax Tree</a></li><li><a href=/programming/parsers/ data-ctx=grammar data-src=/programming/parsers class=internal-link>Parsers</a></li><li><a href=/programming/programming-notes/ data-ctx="grammars post" data-src=/programming/programming-notes class=internal-link>Programming notes</a></li></ul></div><div><script src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://llesha.github.io/js/graph.abd4bc2af3869a96524d7d23b76152c7.js></script></div></div><div id=contact_buttons><footer><p>Made by WaterStop Â© 2022</p><ul><li><a href=https://llesha.github.io/>Home</a></li><li><a href=https://llesha.itch.io>Itch.io</a></li><li><a href=https://github.com/llesha>Github</a></li><li><a href=https://twitter.com/>Twitter</a></li></ul></footer></div></div></body></html>