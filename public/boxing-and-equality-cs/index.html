<!doctype html>
<html lang="en">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="icon" type="image/svg+xml" href="//localhost:1313/svg/icon.svg">
  <script src="//localhost:1313/js/loader.js"></script>
  <meta name="generator" content="Hugo 0.123.1">
  <link rel="stylesheet" href="//localhost:1313/css/colors.css"><link rel="stylesheet" href="//localhost:1313/css/styles.css">
  
  
  <title>C#: Boxing, unboxing and equality operator | llesha</title>
  <script type="module" src="//localhost:1313/js/interactive.js"></script>
</head>

<body>
  <div id="nav-border" class="container">
  <nav id="nav" class="nav justify-content-center">
    <div style="text-align: center; font-size: larger;">
      
      
      <a class="nav-link" href="/">Home</a>
      
      
      <a class="nav-link" href="/projects/">Projects</a>
      
      
      <a class="nav-link" href="/tags/">Tags</a>
      
    </div>
    <button id="change-theme-button">dark</button>
    <div style="justify-content: center;">
      <a href="https://github.com/llesha">GitHub</a>
      <a href="https://stackoverflow.com/users/19933941/llesha">StackOverflow</a>
      <a href="https://www.linkedin.com/in/llesha">LinkedIn</a>
    </div>
  </nav>
</div>
  <main id="main">
    

<h1>C#: Boxing, unboxing and equality operator</h1>




<i data-feather="calendar"></i> <time datetime="2022-07-01">1 July 2022</time>



<br><br>
<h1 id="boxing--unboxing">Boxing / unboxing</h1>
<p>Boxing/unboxing has to do with reference and value types. Value types store their values on
stack (usually primitives). Reference types store value in heap and reference to that value on
stack.</p>
<p>Boxing is process of converting value type to reference type, unboxing is
the opposite. These procedures are computationally expensive, because:</p>
<ul>
<li>to box a value, a new object should be created.</li>
<li>to unbox a value, it should be cast to a particular type, which is time-consuming (albeit to a
lesser extent than boxing). To avoid boxing, one
should use generics.</li>
</ul>
<h1 id="equality">Equality</h1>
<p>There are two types of equality: reference and value.
Reference equality is applicable only to reference types.
It checks that two objects point to the same value in heap.
Value equality checks that two variables contain the same value.</p>
<p><em>Note: <code>==</code> operator will call <code>ReferenceEquals</code> for reference types and is not applicable for two
variables of different type.</em></p>
<h3 id="examples">Examples</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-C#" data-lang="C#"><span class="line"><span class="cl">  <span class="kt">int</span> <span class="n">a</span> <span class="p">=</span> <span class="m">3</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="kt">object</span> <span class="n">pA</span> <span class="p">=</span> <span class="n">a</span><span class="p">;</span> <span class="c1">// implicit boxing</span>
</span></span><span class="line"><span class="cl">  <span class="kt">object</span> <span class="n">explicitPA</span> <span class="p">=</span> <span class="p">(</span><span class="kt">object</span><span class="p">)</span><span class="n">a</span><span class="p">;</span> <span class="c1">// explicit boxing</span>
</span></span><span class="line"><span class="cl">  <span class="kt">int</span> <span class="n">b</span> <span class="p">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">pA</span><span class="p">;</span> <span class="c1">// explicit unboxing - cast an object to type (the only possible way)</span>
</span></span><span class="line"><span class="cl">  <span class="kt">int</span> <span class="n">implicitUnboxing</span> <span class="p">=</span> <span class="n">pA</span><span class="p">;</span> <span class="c1">// Error: Cannot implicitly convert type &#39;object&#39; to &#39;int&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">ReferenceEquals</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">pA</span><span class="p">));</span> <span class="c1">// False</span>
</span></span><span class="line"><span class="cl">  <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">Equals</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">pA</span><span class="p">));</span> <span class="c1">// True</span>
</span></span><span class="line"><span class="cl">  <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">ReferenceEquals</span><span class="p">((</span><span class="kt">object</span><span class="p">)</span><span class="n">a</span><span class="p">,</span> <span class="n">pA</span><span class="p">));</span> <span class="c1">// False</span>
</span></span><span class="line"><span class="cl">  <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">a</span> <span class="p">==</span> <span class="n">b</span><span class="p">);</span> <span class="c1">// True, calls Equals()</span>
</span></span><span class="line"><span class="cl">  <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">((</span><span class="kt">object</span><span class="p">)</span><span class="n">a</span> <span class="p">==</span> <span class="p">(</span><span class="kt">object</span><span class="p">)</span><span class="n">b</span><span class="p">);</span> <span class="c1">// False, calls ReferenceEquals()</span>
</span></span><span class="line"><span class="cl">  <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">a</span> <span class="p">==</span> <span class="n">pA</span><span class="p">);</span> <span class="c1">// Error: Operator &#39;==&#39; cannot be applied to operands if type &#39;int&#39; and &#39;object&#39;</span>
</span></span></code></pre></div>


  </main>
</body>

</html>