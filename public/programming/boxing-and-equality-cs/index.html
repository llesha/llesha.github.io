<!DOCTYPE html>
<html lang="en">

<body>
<div class="singlePage">
    <link rel="stylesheet" href="css/colors.css"><link rel="stylesheet" href="css/styles.css">
<button id="change-theme-button">dark</button>
    <article>
      <h1>C#: Boxing, unboxing and equality operator</h1>
      <p class="meta">
        
        <h1 id="boxing--unboxing">Boxing / unboxing</h1>
<p>Boxing/unboxing has to do with reference and value types. Value types store their values on
stack (usually primitives). Reference types store value in heap and reference to that value on
stack.</p>
<p>Boxing is process of converting value type to reference type, unboxing is
the opposite. These procedures are computationally expensive, because:</p>
<ul>
<li>to box a value, a new object should be created.</li>
<li>to unbox a value, it should be cast to a particular type, which is time-consuming (albeit to a
lesser extent than boxing). To avoid boxing, one
should use generics.</li>
</ul>
<h1 id="equality">Equality</h1>
<p>There are two types of equality: reference and value.
Reference equality is applicable only to reference types.
It checks that two objects point to the same value in heap.
Value equality checks that two variables contain the same value.</p>
<p><em>Note: <code>==</code> operator will call <code>ReferenceEquals</code> for reference types and is not applicable for two
variables of different type.</em></p>
<h3 id="examples">Examples</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>  <span style="color:#66d9ef">int</span> a = <span style="color:#ae81ff">3</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">object</span> pA = a; <span style="color:#75715e">// implicit boxing</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">object</span> explicitPA = (<span style="color:#66d9ef">object</span>)a; <span style="color:#75715e">// explicit boxing</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">int</span> b = (<span style="color:#66d9ef">int</span>)pA; <span style="color:#75715e">// explicit unboxing - cast an object to type (the only possible way)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">int</span> implicitUnboxing = pA; <span style="color:#75715e">// Error: Cannot implicitly convert type &#39;object&#39; to &#39;int&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  Console.WriteLine(ReferenceEquals(a, pA)); <span style="color:#75715e">// False</span>
</span></span><span style="display:flex;"><span>  Console.WriteLine(Equals(a, pA)); <span style="color:#75715e">// True</span>
</span></span><span style="display:flex;"><span>  Console.WriteLine(ReferenceEquals((<span style="color:#66d9ef">object</span>)a, pA)); <span style="color:#75715e">// False</span>
</span></span><span style="display:flex;"><span>  Console.WriteLine(a == b); <span style="color:#75715e">// True, calls Equals()</span>
</span></span><span style="display:flex;"><span>  Console.WriteLine((<span style="color:#66d9ef">object</span>)a == (<span style="color:#66d9ef">object</span>)b); <span style="color:#75715e">// False, calls ReferenceEquals()</span>
</span></span><span style="display:flex;"><span>  Console.WriteLine(a == pA); <span style="color:#75715e">// Error: Operator &#39;==&#39; cannot be applied to operands if type &#39;int&#39; and &#39;object&#39;</span>
</span></span></code></pre></div>
      </p>
      <ul class="tags">
          
      </ul>
    </article>
    <footer>
    Made by llesha Â© 2024
</footer>
<script type="module" src="js/loader.js"></script>

</div>
</body>
</html>
